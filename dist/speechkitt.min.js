//! Speech KITT
//! version : 0.1.0
//! author  : Tal Ater @TalAter
//! license : MIT
//! https://github.com/TalAter/SpeechKITT
(function(a){"use strict";var b,c,d,e,f,g=this,h=!1,i="Activate Voice Control",j=function(){f=document.createElement("div"),f.id="skitt-ui",f.innerHTML='<a id="skitt-toggle-button">&nbsp;</a><label for="skitt-toggle-button" id="skitt-toggle-button__label">'+i+'</label><div id="skitt-listening-text"><span id="skitt-listening-text__instructions">What can I help you with?</span><span id="skitt-listening-text__samples"></span></div>',document.body.appendChild(f),k(),document.getElementById("skitt-toggle-button").addEventListener("click",function(){g.SpeechKITT.toggleRecognition()})},k=function(){d&&f&&(e?e.href=d:(e=document.createElement("link"),e.rel="stylesheet",e.href=d,e.id="skitt-style-sheet",document.body.appendChild(e)))},l=function(){f!==a&&(f.classList.remove("skitt-ui--not-listening"),f.classList.add("skitt-ui--listening"))},m=function(){f!==a&&(f.classList.add("skitt-ui--not-listening"),f.classList.remove("skitt-ui--listening"))},n=function(){h||(h=!0,l())},o=function(){h&&(h=!1,m())};g.SpeechKITT={setStartCommand:function(a,c){if(a=g[a]||a,"function"!=typeof a)throw new TypeError("invalid callback function");c=c||this,b={callback:a,context:c}},setAbortCommand:function(a,b){if(a=g[a]||a,"function"!=typeof a)throw new TypeError("invalid callback function");b=b||this,c={callback:a,context:b}},startRecognition:function(){if(!b)throw new TypeError("cannot start recognition. Start command not defined");b.callback.apply(b.context),n()},abortRecognition:function(){if(!c)throw new TypeError("cannot abort recognition. Abort command not defined");c.callback.apply(c.context),o()},toggleRecognition:function(){h?this.abortRecognition():this.startRecognition()},onStart:function(){n()},onEnd:function(){o()},render:function(){f===a&&j(),this.isListening()?l():m()},vroom:function(){this.render()},show:function(){if(f===a)throw new TypeError("cannot show interface. Must be rendered first");f.classList.remove("skitt-ui--hidden")},hide:function(){if(f===a)throw new TypeError("cannot hide interface. Must be rendered first");f.classList.add("skitt-ui--hidden")},isListening:function(){return h},setStylesheet:function(a){d=a,k()},setToggleLabelText:function(a){i=a,f&&(document.getElementById("skitt-toggle-button__label").innerText=i)}}}).call(this);